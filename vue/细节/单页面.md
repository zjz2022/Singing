## 单页面 

### 30.1 单页面应用和多页面应用区别及优缺点？

**单页面**：顾名思义，只有一个页面。一般是一个主页和多个路由页面组成。

优点：

- 公共资源不重新加载，局部加载，服务器压力小
- 切换速度快，用户体验好
- 前后端分离

缺点：

- 不利于SEO（可以优化：比如路由懒加载等）
- 初次加载时耗时多
- 开发难度较大（相对多页面）

**多页面**（Multi Page Application——MPA）：有多个HTML页面，跳转的时候是从一个html页面跳到另一个页面。

优点：

- 利于SEO。
- 更容易扩展。
- 更易数据分析。

缺点：

- 开发成本高。
- 服务器压力大。
- 用户体验相对较差。

### 30.2 对于单页面应用（`SPA`），有了解过是怎么实现的吗？你说你自己部署过应用到服务器，输入不同的`url`会返回页面不同的内容，这个对于单页面应用是怎么实现的？对于`history`这个全局对象，有什么用法吗？

**单页面应用（SPA）的实现**

单页面应用（SPA）是一种Web应用或网站的设计模式，其中所有必要的代码（HTML、JavaScript 和 CSS）都在一个页面中加载。随后的页面交互通过动态地重写当前页面的内容来实现，而不是默认的从服务器加载新页面。

**常用技术：**

1. **路由（Routing）**: 在SPA中，路由通常是在前端处理的。当用户点击一个链接或输入一个URL时，前端路由会捕获URL并解析出相应的视图或组件，然后渲染到页面上。
2. **Ajax**: 用于从服务器获取或发送数据，并在页面上动态更新内容。
3. **前端框架**: 如React、Angular、Vue等，它们提供了用于构建SPA的工具和库。

**URL与内容的关系**

在传统的多页面应用（MPA）中，不同的URL通常对应服务器上不同的HTML页面。但在SPA中，所有的视图逻辑都在一个HTML页面中处理，通常是`index.html`。

**实现方式：**

1. Hash Routing

   : 利用URL的哈希（

   ```
   #
   ```

   ）部分来表示当前的应用状态。由于哈希变化不会触发页面重新加载，因此可以用JavaScript来捕获哈希变化并据此渲染不同的内容。

   - 例如：`http://example.com/#/user/1`

2. HTML5 History API

   : 使用

   ```
   pushState
   ```

   和

   ```
   replaceState
   ```

   方法，可以在不重新加载页面的情况下修改浏览器的历史记录和URL。

   - 例如：`http://example.com/user/1`

3. **服务器配置**: 对于使用HTML5 History API的SPA，服务器需要配置为对所有路由返回同一个`index.html`文件。这样，无论用户输入什么URL，都会加载相同的HTML文件，然后由前端路由接管后续的视图渲染。

**部署到服务器**

当你部署一个使用HTML5 History API的SPA时，你需要确保服务器对于所有的请求都返回同一个`index.html`文件。这通常通过服务器的重写规则来实现。

- **Apache**: 使用`.htaccess`文件。
- **Nginx**: 使用`nginx.conf`文件。
- **Node.js**: 使用Express等服务器框架。

这样，无论用户输入什么URL，都会得到相同的`index.html`文件，然后前端路由会根据URL渲染不同的内容。