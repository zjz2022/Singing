### 简单讲解一下http2的多路复用以及与http1的区别

**传输方式**

HTTP2采用二进制格式传输，取代了HTTP1.x的文本格式，二进制格式解析更高效。

**机制**

**在HTTP/1中，每次请求都会建立一次HTTP连接，也就是我们常说的3次握手4次挥手，这个过程在一次请求过程中占用了相当长的时间，及时开启了Keep-Alive，解决了多次连接的问题，但是依然有两个效率上的问题：**

1.第一个：串行的文件传输，当请求a文件时，b文件只能等待，等待a连接到服务器、服务器处理文件、服务器返回文件，这三个步骤。我们假设这三步用时都是1秒，那么a文件用时为3秒，b文件传输完成用时为6秒，一次类推。（注：此项计算有一个前提条件，就是浏览器和服务器是单通道传输）

2.连接数过多。我们假设Apache设置了最大并发数为300，因为浏览器限制，浏览器发起的最大请求数为6，也就是服务器能承载的最高并发为50，当第51个人访问时，就需要等待前面某个请求处理
完成。

**HTTP/2的多路复用就是为了解决上述的两个性能问题。**

在HTTP/2中，有两个非常重要的概念，分别是帧(frame)和流(stream)。 帧代表着最小的数据单位，每个帧会标识出该帧属于哪个流，流也就是多个帧组成的数据流。

多路复用，就是在一个TCP连接中可以存在多条流。换句话说，也就是可以发送多个请求，对端可以通过帧中的标识知道属于哪个请求。通过这个技术，可以避免HTTP旧版本中的队头阻塞问题，极大的提高传输性能。

简单来说：

1.同域名下所有通信都在单个连接上完成，消除了因多个TCP连接而带来的延时和内存消耗。

2.单个连接上可以并行交错的请求和响应，之间互不干扰。

> 作者：undefinedname
> 链接：https://juejin.cn/post/6844904015247982599
> 来源：稀土掘金
> 著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。