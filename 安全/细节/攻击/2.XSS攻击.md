**2.XSS攻击**

​		跟跨网站脚本(XSS)相比，XSS 利用的是用户对指定网站的信任，CSRF 利用的是网站对用户网页浏览器的信任。

​		XSS攻击是指攻击者通过执行恶意脚本来攻击Web应用程序，从而在受害者的浏览器中执行恶意代码。XSS攻击可以分为三种类型：存储型XSS和反射型XSS。存储型XSS是指攻击者将恶意脚本存储在Web应用程序的数据库中，当用户访问包含恶意脚本的页面时，恶意脚本会被执行。存储型XSS攻击通常发生在留言板，评论区等需要用户输入内容的地方。反射型XSS是指攻击者将恶意脚本作为参数发送给Web应用程序，Web应用程序将恶意脚本反射给用户的浏览器，从而执行恶意代码。反射型XSS攻击通常发生在搜索框，登录框等需要用户输入内容的地方。DOM XSS基于 DOM 的 XSS 攻击是指通过恶意脚本修改页面的 DOM 结构，是纯粹发生在客户端的攻击。DOM 型 XSS 跟前两种 XSS 的区别：**DOM 型 XSS 攻击中，取出和执行恶意代码由浏览器端完成，属于前端 JavaScript 自身的安全漏洞，而其他两种 XSS 都属于服务端的安全漏洞**。

​		作为一种HTML注入攻击，XSS攻击的核心思想就是在HTML页面中注入恶意代码，而XSS采用的注入方式是非常巧妙的。在XSS攻击中，一般有三个角色参与：攻击者、目标服务器、受害者的浏览器。

​		由于有的服务器并没有对用户的输入进行安全方面的验证，攻击者就可以很容易地通过正常的输入手段，夹带进一些恶意的HTML脚本代码。当受害者的浏览器访 问目标服务器上被注入恶意脚本的页面后，由于它对目标服务器的信任，这段恶意脚本的执行不会受到什么阻碍。而此时，攻击者的目的就已经达到了。

下面我们以一段简单的JavaScript脚本为例，来描述整个XSS攻击的过程：

<script>alert(document.cookie);</script>

上面这段脚本的执行具体内容就是弹出一个对话框显示用户的Cookie信息。攻击者在向目标服务器的某个页面进行数据输入的过程中，通过正常的输入方式夹带进这段脚本。

危害：

1.窃取用户Cookie2.后台增删改文章3.XSS钓鱼攻击4.利用XSS漏洞进行传播和修改网页代码5.XSS蠕虫攻击6.网站重定向7.获取键盘记录8.获取用户信息等

防御：

通过前面的介绍可以得知，XSS 攻击有两大要素：

1. 攻击者提交恶意代码。
2. 浏览器执行恶意代码。

根本的解决方法：**从输入到输出都需要过滤、转义。**

1、对输入和URL参数进行过滤(白名单和黑名单)检查用户输入的数据中是否包含一些特殊字符，如<、>、’、“等，发现存在特殊字符，将这些特殊字符过滤或者编码。

2、富文本的事件肯定要被禁止，因为富文本并不需要事件这种东西，另外一些危险的标签也需要禁止，例如：` <iframe>，<script>，<base>，<form>`等

3、所有需要输出到 HTML 页面的变量，全部需要使用编码或者转义来防御

4、安全头，这是浏览器自带的防范能力，一般是通过开启 Web 安全头生效的。**CSP**：W3C 的 Content Security Policy，简称 CSP，主要是用来定义页面可以加载哪些资源，减少 XSS 的发生。**X-XSS-Protection**：IE 提供的一些 XSS 检测与防范，默认开启

5、HTTP-only Cookie。攻击者可以通过注入恶意脚本获取用户的 Cookie 信息。通常 Cookie 中都包含了用户的登录凭证信息，攻击者在获取到 Cookie 之后，则可以发起 Cookie 劫持攻击。所以，严格来说，HttpOnly 并非阻止 XSS 攻击，而是能阻止 XSS 攻击后的 Cookie 劫持攻击。

https://zhuanlan.zhihu.com/p/61773197