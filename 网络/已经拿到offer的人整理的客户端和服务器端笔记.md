 客户端和服务器端 

(不是局限于机器而是局限于需求)

客户端:可以向服务器发请求，并接受返回的内容进行处理

服务器端:能够接受客户端请求，并且把相关资源信息返回给客户端



 输入一个网址后会发生什么 

1、URL地址解析

(缓存判断):浏览器会判断所请求的资源是否在缓存里，如果请求的资源在缓存里并且没有失效，那么就直接使用，否则向服务器发起新的请求。

2、DNS服务器域名解析

3、与服务器建立TCP连接

4、把客户端信息传给服务器(发送HTTP请求)

5、服务器得到并处理请求(HTTP响应)

6、客户端渲染服务器返回的内容

7、和服务器断开TCP连接



\###服务器联网之后

给服务器联网后会有两个IP地址

内网IP:局域网内访问

外网IP:外部用户可以基于外网IP访问到服务器125.39.174.202



 一个完整的URL包括了哪些内容 

http://www.baidu.com:80/stu/index.html?from=wx&lx=1#zhenyu



协议:(http://):传输协议就是能够把客户端和服务器端通信的信息，进行传输的工具(类似于快递小哥)

​       +http超文本传输协议,除了传递文本，还可以传递媒体资源文件(或者流文件)及XML格式数据

​        +https更加安全的http，一般涉及支付的网站都要采用https协议(s:ssl加密传输过程)

​         ftp 文件传输协议(一般应用于把本地资源上传到服务器端)



域名:(www.baidu.com):

  +顶级域名 qq.com

  +一级域名 www.qq.com

  +二级域名 sports.qq.com

  +三级域名 kbs.sports.qq.com 

  .com 国际域名

  .cn 中文域名

  .com.cn

  .edu教育

  .gov政府

  .io 博客

  .org 官方组织

  .net 系统类

  

端口号:(80):端口号取值范围0~65535，用端口号来区分同一台服务器的不同项目

  +http默认端口号:80

  +https默认端口号:443

  +ftp默认端口号:21

  +如果项目采用的是默认端口号，书写地址的时候，不用加端口号，浏览器在发送请求的时候会默认加上

（服务器根据端口号找到对应的项目）





请求资源名称:(/stu/index.html):

 +默认的路径或者名称 (xxx.com/stu/不指定资源名，服务器会找默认的资源，一般默认资源名是default.html、index。html....当然这些可以在服务器端自己配置)

 +注意伪URL地址的处理(URL重写技术是为了增加SEO搜索引擎优化的，动态的网址一般不能被搜索引擎收，所以我们要把动态网址静态化，此时需要重写url)

https://item.jd.hk/2482519.html

====》https://item.jd.hk/index.php?id=2482519(伪URL地址的处理)

（服务器根据请求资源的路径找到资源文件）



问号传参信息:(?from=wx&lx=1)

 +客户端想把信息传递给服务器有很多种方式

​    +URL地址问号传参

​    +请求报文传输(请求头和请求主体)



哈希值:(zhenyu)

 +也能充当信息传输的方式

 +锚点定位

 +基于HASH实现路由管控(不同的HASH值，展示不同的组件和模块)





URL编码解析方式

请求地址中如果出现非有效UNICODE编码内容，现代版浏览器会默认的进行编码

1、基于encodeURI编码，可以基于decodeURI解码，一般用encodeURI编码，这样整个URL中的特殊字符都会自动编译

2、encodeURIComponent/decodeURIComponet相对于encodeURI来说，不用给整个URL编码，而是给URL部分信息进行编码(一般是问号传参的值编码)





 DNS服务器域名解析 

DNS服务器:域名解析服务器，在服务器上存储这域名<=>服务器外网ip的相关记录



 DNS优化 

-DNS缓存(一般浏览器会在第一次解析后，默认建立缓存，时间很短，只有一分钟左右)

-减少DNS解析次数(一个网站中需要发送域名和服务器尽可能减少)

-DNS预获取(dns-prefetch)：在页面加载开始的时候，就把当前页面中需要访问其他域名(服务器)和服务器的信息提前DNS解析





 TCP三次握手(相当于在修路) 









 HTTP连接(传东西) 

-请求报文:所有经过传输协议，客户端传递给服务器的内容，都被称为请求报文

​    +起始行

​    +请求头

​    +请求主体

-响应报文:经过传输协议，服务器返回给客户端的内容被称为响应报文

​    +HTTP状态码

​    +响应头

​    +响应主体

-HTTP报文:请求报文+响应报文



通过谷歌浏览器F12=》NETWORK（可以看到所有客户端和服务端的交互信息）=》点击某一条信息，在右侧可以看到所有的http报文信息

![image.png](D:/%E6%96%87%E4%BB%B6/typora%E5%9B%BE%E7%89%87/1642086573372-f22547ab-edbe-446e-91da-74654aeb7d63.webp)



 服务器部署 

 WEB服务器 

1、前后端都开发好了

2、购买服务器(阿里云ESC=>独立主机)

3、服务器部署  tomcat/appache/iis/nginx/node

   指定项目的路径

   指定了端口号(我们一般端口号用80/443)

   服务器上除了项目需要的环境之外，其余所有东西都不需要安装(保证绝对安全的端口不被占用)

   还可以指定默认页，指定错误页，指定支持的资源文件类型，最主要的是相当于创建了一个服务，后期客户端请求过来后由这个服务负责接收请求查找对应的资源文件



web服务器:(客户端发送的是资源请求)

![image.png](D:/%E6%96%87%E4%BB%B6/typora%E5%9B%BE%E7%89%87/1641723467870-9e075b2d-bce1-4686-ad88-adbe59fb8058.webp)



4、购买域名，并且进行dns域名解析

5、到工信部备案(基于第三方平台可代理备案)



数据服务器:(后台做的东西)

![image.png](D:/%E6%96%87%E4%BB%B6/typora%E5%9B%BE%E7%89%87/1641724428702-3960b9d9-b0e8-4b65-bc07-3ae1d187303f.webp)



  

 服务器与同源策略: 

(协议、域名、端口都一致==>同源策略==>ajax实现)

如果web服务器和数据服务器是同一个服务器，就是同源策略，协议域名端口都相等；

如果web服务器和数据服务器不是同一台服务器的话就是非同源请求，也就是跨域请求；





 HTTP状态码 

2开头

-200:成功(ok)

-201:CREATED:一般用于告诉服务器创建一个新文件，最后服务器创建成功后返回的状态码

-204:NO CONTENT:对于某些请求(例如:PUT或DELETE)，服务器不想处理，可以返回空内容，并且用204状态码告知

-301:Moved Permanently:永久重定向(永久转移)

  例子:京东以前www.360buy.com,现在只要输入这个网址就会永久重定向到京东

-302:Moved Temporaril:临时重定向，很早以前用302来做，现在主要用307来处理，307的意思就是临时重定向===>

作用:服务器的负载均衡、视频防盗

-304:Not Modified:设置HTTP的协商缓存

-307:临时重定向

-400:Bad Request:传递给服务器的参数错误

-401:Unauthorized:无权限访问

-404:Not Found:请求地址错误

-500:Internal Server Error:未知服务器错误

-503:Service Unavailable:服务器超负荷





 浏览器渲染 

浏览器是多线程，遇到link/img/audio/video等是异步去加载资源信息(浏览器分配一个新的线程去家宅，主线程继续向下渲染页面)，如果遇到的是script或者@import，则让主线程去加载信息。



 DOM的重绘和回流 

重绘:元素的样式改变(但宽高、大小、位置不变)

回流:元素的大小或者位置发生了变化(当页面布局和几何信息发生变化的时候)，触发了重新布局，导致渲染树重新计算布局和渲染



注意:回流一定触发重绘，重绘不一定触发回流

![image.png](D:/%E6%96%87%E4%BB%B6/typora%E5%9B%BE%E7%89%87/1641795828693-f48237db-e5e0-4adf-91f5-6f63bc4d76bf.webp)



 产生回流原因: 

![image.png](D:/%E6%96%87%E4%BB%B6/typora%E5%9B%BE%E7%89%87/1641875539929-84a2885b-0115-4b98-a74a-df525555cf92.webp)



 产生重绘原因: 

![image.png](D:/%E6%96%87%E4%BB%B6/typora%E5%9B%BE%E7%89%87/1641875603844-45ad86c0-0c45-4714-963f-6f36ea3d2cb3.webp)





 性能优化:如何避免DOM的回流 

![image.png](D:/%E6%96%87%E4%BB%B6/typora%E5%9B%BE%E7%89%87/1641875664296-aec6f906-73d9-41f3-8863-bf35142730c4.webp)



1、放弃传统操作dom的时代，基于vue/react开始数据影响视图模式

例如:mvvm/mvc/virtual dom/dom diff



2、分离读写操作(现代的浏览器都有渲染队列的机制)

这些操作会刷新渲染队列(会引发回流)

![image.png](D:/%E6%96%87%E4%BB%B6/typora%E5%9B%BE%E7%89%87/1641795893500-23c381c9-f078-495d-86ea-baece6aaafd3.webp)



现代浏览器存在渲染队列，会自动读取当前修改样式的下一行判断其是否也是修改样式，如果是的话就将其放到渲染队列里面，直到某行代码不会改变样式

![image.png](D:/%E6%96%87%E4%BB%B6/typora%E5%9B%BE%E7%89%87/1641796095128-2dc01287-c67a-4bd9-bf41-aec2dbf8cc20.webp)



上图引发一次回流



![image.png](D:/%E6%96%87%E4%BB%B6/typora%E5%9B%BE%E7%89%87/1641796245928-35bc9d8d-b152-4108-96be-b4c2867fbff7.webp)



上图触发两次回流



![image.png](D:/%E6%96%87%E4%BB%B6/typora%E5%9B%BE%E7%89%87/1641796275079-c3622528-4cbc-4366-b6ca-b6e0cff29da0.webp)



上图触发三次回流

3、缓存布局信息

![image.png](D:/%E6%96%87%E4%BB%B6/typora%E5%9B%BE%E7%89%87/1641797054343-80520555-3af8-4f39-8e27-45fee39b20c7.webp)



4、元素批量修改

以下这种情况会触发10次回流

![image.png](D:/%E6%96%87%E4%BB%B6/typora%E5%9B%BE%E7%89%87/1641875428080-a3bf3b26-6271-493f-ad07-0c23222e36de.webp)



所以可以通过模板字符串批量修改

![image.png](D:/%E6%96%87%E4%BB%B6/typora%E5%9B%BE%E7%89%87/1641875386117-c658ed2d-ad26-4757-b5ff-b1cb7f385a2d.webp)



5、fragment文档碎片

![image.png](D:/%E6%96%87%E4%BB%B6/typora%E5%9B%BE%E7%89%87/1641875332180-66d016bc-30d1-4460-961e-98f46d98f93f.webp)





 前端跨域解决方案 

\###跨域(非同源策略请求)

-同源策略请求 ajax/fetch

-跨域传输

 jsonp跨域传输 

script

img

link

iframe

=>不存在跨域请求限制

![image.png](D:/%E6%96%87%E4%BB%B6/typora%E5%9B%BE%E7%89%87/1642314405710-3dce38dd-5246-4091-b97d-95a220f7410f.webp)



jsonp就是利用这一点

把本地的回调函数作为参数传递给服务器

缺点:

1、只能用于get请求

2、get请求不咋安全

 cors跨域资源共享 

![image.png](D:/%E6%96%87%E4%BB%B6/typora%E5%9B%BE%E7%89%87/1642316364514-f7e97d3a-c9e5-42a6-ba2c-df0389a1a9e5.webp)





![image.png](D:/%E6%96%87%E4%BB%B6/typora%E5%9B%BE%E7%89%87/1642316387442-8f76b6ec-b0d3-4e22-99c9-314b4b39b217.webp)



1、客户端(发送ajax/fetch)

2、服务器设置相关头信息(需要处理options试探性请求)



 http proxy跨域 

通过webpack来配置代理

![image.png](D:/%E6%96%87%E4%BB%B6/typora%E5%9B%BE%E7%89%87/1642348759239-6205c190-399b-4792-b2e3-d7e928d83e77.webp)





 postMessage跨域 

![image.png](D:/%E6%96%87%E4%BB%B6/typora%E5%9B%BE%E7%89%87/1642348792115-68b4ca26-a3ce-4e71-b98e-db247bcacd26.webp)





 nginx代理跨域 

![image.png](D:/%E6%96%87%E4%BB%B6/typora%E5%9B%BE%E7%89%87/1642349305564-ebd6c51d-3d7a-43cc-9c1e-6f03c8d75976.webp)





 websocket协议跨域 

![image.png](D:/%E6%96%87%E4%BB%B6/typora%E5%9B%BE%E7%89%87/1642349279429-29ade4ba-966c-4552-a518-8f18742f7008.webp)



![image.png](D:/%E6%96%87%E4%BB%B6/typora%E5%9B%BE%E7%89%87/1642349288558-b0412e24-1834-4b4c-8a30-95f6e11b938e.webp)



 前端安全问题 

 xss攻击 

web页面:包含html和js文件 嵌入可执行的代码(js),xss攻击网络传输的时候,js

文件 是可以被下载或通过ajax提交的



xss危害

用户提交的数据，未经处理之前====》改变js

强行改变程序的执行方式



为什么会攻击js

因为js容易被攻击，访问网站时js会被下载下来



怎么预防xss攻击

1.文件设置成只读

2.通过后台程序检测文件大小的改变，报警更换文件

3.校验用户输入的信息(登录时做校验)

4.对特殊符号!/?/@...进行过滤

 csrf攻击 

提交方法:

1.form action="提交路径"

2.<a href="a/java/id=3">

3.ajax url提交

4.js提交 onsubmit事件



csrf解决:

1.token添加二次验证(就是登录时的token验证，请求头携带token)

2.验证码 手机号 微信验证



 sql注入 

一般发生在 注册 评论 添加商品....

![image.png](D:/%E6%96%87%E4%BB%B6/typora%E5%9B%BE%E7%89%87/1644462685015-d4b19184-b35e-4c6e-9890-1969be2af317.webp)







避免:

1.添加正则验证 特殊符号

2.屏蔽敏感词汇 过滤程序

3.缩减用户权限

4.sql语句 有工具可以检测漏洞



 接口加密 

url?keyword=val1&id=3&name=zhangsan&pwd=1234



get传输:

post传输有可能被

数据劫持====》抓包

js原生:

var url="https://www.baidu.com"

var params="?keyword="+val1

​      params+="&id=3"



md5()加密方式

  “?keyword="+md5(val1)

   params+="&id="+md5(3)

路径加密

   url=md5(url+param)