https://www.diffusiondata.com/what-are-web-sockets-and-how-do-they-work/

## 什么是 WebSocket 以及它们如何工作？

2023 年 3 月 23 日 |扩散数据

WebSocket 是一种协议，允许客户端和服务器之间通过单个长期连接进行实时双向通信。近年来，WebSocket 因其能够在 Web 应用程序中提供低延迟、实时通信的能力而受到欢迎。在本文中，我们将探讨 WebSocket 是什么、它们如何工作以及一些常见用例。

### 什么是 WebSocket？

WebSocket 是一种通过单个长期连接在客户端和服务器之间进行双向实时通信的协议。与传统的 HTTP 请求不同，传统的 HTTP 请求是单向的并且每个请求都需要一个新的连接，WebSocket 允许客户端和服务器之间进行持续通信。

WebSocket 是 HTML5 规范的一部分，并受到所有现代 Web 浏览器的支持。它们通常在客户端使用 JavaScript 并在服务器端使用 Node.js 或 Java 等服务器端技术来实现。

### WebSocket 的工作原理

WebSocket 的工作原理是通过单个 TCP 套接字在客户端和服务器之间建立持久连接。一旦连接建立，客户端和服务器之间就可以实时发送和接收数据。

WebSocket 协议由两部分组成：初始 HTTP 握手和 Web Socket 协议本身。

### HTTP 握手

初始 HTTP 握手用于建立 WebSocket 连接。客户端向服务器发送 HTTP 请求，并在 Upgrade 标头中指定 WebSocket 协议。服务器使用 HTTP 响应进行响应，其中包含 Upgrade 标头，表明它正在切换到 WebSocket 协议。

### WebSocket 协议

HTTP 握手完成后，客户端和服务器就可以使用 WebSocket 协议进行通信。 WebSocket 协议是一种简单的、基于消息的协议，允许客户端和服务器之间进行双向通信。

消息以帧的形式发送，帧由标头和有效负载组成。标头包含有关帧的信息，例如消息类型、长度以及它是否是消息中的最终帧。有效负载包含实际的消息数据。

### WebSocket 的用例

WebSocket 常用于各种实时 Web 应用程序。以下是一些常见示例：

**聊天应用程序**

WebSocket 通常用于聊天应用程序，以在用户之间提供实时消息传递。通过 WebSocket，可以实时发送和接收消息，从而提供快速响应的聊天体验。

**在线游戏**

WebSocket 还用于在线游戏中，以提供玩家和游戏服务器之间的实时通信。借助 WebSocket，可以实时发送和接收游戏事件，从而提供更加身临其境的交互式游戏体验。

**实时仪表板**

WebSocket 还可用于创建显示实时数据更新的实时仪表板。借助 WebSocket，数据可以实时推送到仪表板，使用户能够实时查看最新更新。

**金融交易**

WebSocket 通常用于金融交易应用程序，以提供股票价格和其他金融数据的实时更新。通过 WebSockets，可以实时发送和接收数据，使交易者能够根据最新的市场信息做出明智的决策。

### 结论

WebSocket 是一种强大的协议，用于 Web 应用程序中客户端和服务器之间的实时通信。它们允许通过单个长期连接进行低延迟、双向通信，使其成为聊天、游戏、仪表板和金融交易等实时应用程序的理想选择。随着 WebSocket 在现代 Web 浏览器中的广泛采用，它们已成为构建实时 Web 应用程序的重要工具。
