- [IPv4 是什么？](https://nordvpn.com/zh/blog/ipv4-ipv6-bijiao/#what-is-ipv4)
- [IPv6 是什么？](https://nordvpn.com/zh/blog/ipv4-ipv6-bijiao/#what-is-ipv6)
- [为什么 IPv6 无法完全实作？](https://nordvpn.com/zh/blog/ipv4-ipv6-bijiao/#why-is-ipv6-not-fully-implemented)
- [IPv4 和 IPv6 地址之间的差异](https://nordvpn.com/zh/blog/ipv4-ipv6-bijiao/#ipv4-and-ipv6-differences)
- [IPv4 和 IPv6 地址之间的相似处](https://nordvpn.com/zh/blog/ipv4-ipv6-bijiao/#ipv4-and-ipv6-similarities)
- [IPv6 是否比 IPv4 更好？](https://nordvpn.com/zh/blog/ipv4-ipv6-bijiao/#is-ipv6-better-than-ipv4)
- [IPv4 和 IPv6 哪个较快？](https://nordvpn.com/zh/blog/ipv4-ipv6-bijiao/#which-is-faster-ipv4-or-ipv6)
- [我应该使用 IPv4 还是 IPv6？](https://nordvpn.com/zh/blog/ipv4-ipv6-bijiao/#should-i-enable-ipv4-or-ipv6)
- [IPv6 和 VPN：如果您的 VPN 不支持 IPv6 对上网有影响吗？](https://nordvpn.com/zh/blog/ipv4-ipv6-bijiao/#ipv6-and-vpn)

## IPv4 是什么？

IPv4是当前用于创建、分配和使用 IP 地址的协议。IPv4 是首个广泛使用的 [IP 地址](https://nordvpn.com/zh/what-is-my-ip/)版本。这种互联网协议使用 32 位数字地址，这意味着它大约可以拥有 43 亿个唯一的 IP 地址。

然而，当 IPv4 在 40 年前创建时，工程师没有想到如今人们都会拥有至少几个联网设备。现在很明显，IPv4 无法为全球人口提供足够的 IP 地址。更糟的是，在 IPv4 的初期阶段，分配了数十亿个 IP 地址给大公司。尽管至今这些 IP 地址仍未被使用，但这些公司也拒绝将其归还给世界，而我们的 IP 地址正在逐渐耗尽。

### 优点

- 

  简单易记。

- 

  得到多数网站的支持。

- 

  可靠且经过测试的技术。

### 缺点

- 

  缺少新的 IPv4 地址和资源。

- 

  子网问题。

## IPv6 是什么？

90 年代，一种名为 IPv6 的升级引入了 128 位 IP 地址。IPv6 提供了近 3.4 × 10 ^ 38 个唯一地址。这相当于 340 兆兆兆个 IP 地址（准确地说是 340,282,366,920,938,463,463,374,607,431,768,211,456）。这远超过 IPv4 的 43 亿个唯一地址。

### 优点

- 

  IPv6 使用 128 位技术，可提供 340 个后接 36 个零位数（undecillion）的 IP 地址。

- 

  新设备支持的新前沿协议。

- 

  无子网问题。

- 

  其设计比 IPv4 更安全。

### 缺点

- 

  IPv6 更难配置，因此在实施过程中更可能留下漏洞和错误。

- 

  并非所有网站都支持。

- 

  非常长，很难记住。

## 为什么 IPv6 无法完全实作？

尽管 IPv6 在规模上具有明显的优势，但出于几个原因，IPv6 尚未被完全采用。

- **IPv6 与 IPv4 不兼容。**如果网站运行在 IPv4 上，但您的设备和 ISP 仅使用较新的协议，您将无法访问该网站。若要访问该网站，您的设备也需要与 IPv4 兼容。如今，多数现代路由器和电子设备都支持 IPv6；然而，要实现全球无缝转换，所有设备、操作系统和 ISP 都需要升级其系统。为了避免任何服务中断，将不得不在一段时间同时运行这两种协议，这可能会带来高昂的成本。您可以在此处查看我们关于如何启用或禁用 IPv6 的文章。
- **对一般用户的好处并不明显。**如果客户无法直接感受到新技术的直接影响，或认为这不具有太大的价值，公司便很难证明投资新技术的必要性。创建更多的 IP 地址是一个重要而具有远见的目标，但在真正用尽地址之前，不会影响日常用户。



## IPv4 和 IPv6 地址之间的差异

IPv4 和 IPv6 协议之间的主要差异在于 IPv4 地址使用 32 位，而 IPv6 是一种 128 位协议。以下将介绍这两种协议之间的更多差异。

| IPv4                         | IPv6                      |
| :--------------------------- | :------------------------ |
| 32 位地址长度                | 128 位地址长度            |
| 提供 43 亿个 IP 地址         | 提供 340 兆兆兆个 IP 地址 |
| 协议安全性取决于各个应用程序 | 协议包含 IPSEC 安全性     |
| 地址用小数表示               | 地址用十六进制表示        |
| 分段由发送方和转发路由器执行 | 分段仅由发送方执行        |
| 数据包流标识不可用           | 数据包流标识可用          |
| 校验和字段可用               | 校验和字段不可用          |
| 20-60 字节报头               | 40 字节报头               |

### 1. 标记法

IPv4 地址使用 **32 位**的点分十进制标记法。一个 IPv4 地址的例子是 localhost – 127.0.0.1。用二进制表示，这会被写成 01111111.0000000.00000000.000000001。

IPv6 地址使用 **128 位**，并采用冒号分隔的十六进制标记法。一个 IPv6 地址的例子是 2001:db8:3333:4444:5555:6666:7777:8888。作为一个 128 位的格式，用二进制表示会非常长，因此本文不便列出。

如前所述，较长的地址和十六进制标记法使得 IPv6 拥有远超过 IPv4 地址的数量。

### 2. IP 报头

在 IPv4 中，报头的长度可以是 20 到 60 个字节。除非在报头的末尾设置选项，否则报头通常被限制为 20 个字节。

在 IPv6 中，报头固定大小为 40 个字节。IPv6 允许扩展，而不使用 IPv4 的选项报头元素，这有助于通过更容易结合未来技术，而帮助协议在未来的验证。

IPv6 的报头越大意味着更大的开销。然而，由于内置元素，较大的报头提供了许多优点：

- 它不使用校验和，因此不需要在运输过程中进行处理。
- 它使用流标识来识别有效载荷，以提高服务处理的质量。
- IPv6 数据包在传输过程中不能被分割，从而提高了完整性。只有来源节点才能对数据包进行分段。

### 3. 地址类型

IPv4 提供广播、单播和多播地址。通过保留特定的 IP 地址并将其限制于一般使用之外，达到了这种差异化。IPv4 地址也可以用于任播（anycast），但在 IPv4 中不是定义的地址类型。

IPv6 提供单播（global、link-local、loopback、unspecified、unique local）、多播（well-known、transient、solicited-node）和任播地址。

**注意：**要让任播在 IPv6 中工作，需要告诉路由设备它正在共享一个任播地址。

### 4. 地址配置

这两种协议的地址配置有很大不同。

IPv4 的地址可以手动配置，也可以通过 DHCP（动态主机配置协议）来配置。

IPv6 支持手动配置、SLAC（无状态地址自动配置）和 DHCPv6（无状态/有状态）配置。在多数使用情况下，这使得 IPv6 配置和运行变得更加容易。

### 5. 本地地址

IPv4 使用 ARP（地址解析协议）将互联网 IPv4 地址连结到本地链接层地址，如 MAC 地址。

IPv6 使用 NDP（邻居发现协议）来互连本地设备，并将它们连接到本地网络的互联网网关。

## IPv4 和 IPv6 地址之间的相似处

以下是 IPv4 和 IPv6 技术之间的一些相似处：

- 两种 IP 地址都由二进制数字组成，用于识别连接到网络的机器。
- 两者都支持手动 IP 分配。
- 两种 IP 系统都有一个数据包报头，可以传输碎片数据包。
- 两者都具有广播和多播功能。
- 两者都支持 VLSM。

## IPv6 是否比 IPv4 更好？

除了解决 IPv4 地址短缺的关键优点外，IPv6 还有一些关键优势，当它最终被采用时，用户将能享受这些优势：

### 1. 提高安全性

IPv6 的构建考虑到安全性。它提供了保密性、身份验证和数据完整性。互联网控制消息协议（ICMP）作为 IPv4 组件的一部分，可能携带恶意软件，因此常被企业防火墙封锁。另一方面，IPv6 的 ICMP 数据包可以使用 IPsec，使其变得更加安全。

### 2. 无地域限制

与 IPv4 地址不同，IPv6 地址对所有人开放，不会偏向世界任何一方。在创建之初，有 50% 的 IPv4 地址保留给美国。

### 3. 更高效路由的潜力

与 IPv4 的可变报头不同，IPv6 的报头较长，但它们是一致的。这可能意味着路由到这些地址的代码将变得更简单，也需要更少的硬件处理。在这种情况下，IPv6 将具有更好的服务质量和用户体验。

### 4. 端到端连接

工程师创建了网络地址转译（NAT）方法来帮助解决 IP 地址不足的问题。IPv6 将为所有设备创建足够的 IP 地址，这将使 NAT 不再必要。每个设备现在都可以连接到互联网，并直接与网站“通信”。

### 5. 自动配置

可以说，IPv6 最好的特性之一是前述的无状态自动配置。这允许设备在不需要服务器的情况下自行分配 IP 地址。相反地，IP 地址是使用设备的 MAC 地址生成的，每个手机、平板电脑或笔记本电脑的 MAC 地址都是唯一的。这使得连接到同一网络的设备更容易发现彼此。

## IPv4 和 IPv6 哪个较快？

IPv6 是否比 IPv4 更快？目前还没有明确的答案，在 IPv6 被广泛采用之前可能也不会有答案。尽管性能上的差异使 IPv4 略有优势，但差异非常小。Sucuri 测试了 22 个域名在 6 个不同地点的响应时间，发现 IPv6 比 IPv4 稍慢，但仅慢了几分之一秒。这在浏览互联网是无法察觉的。速度测试还表明，响应时间也可能受到地点的影响。

## 我应该使用 IPv4 还是 IPv6？

您可以同时使用 IPv4 和 IPv6。浏览器会检查网站是否支持 IPv6。如果不支持，则会通过 IPv4 发送请求。

虽然两者都有一些好处，但出于本文所述的原因，整个互联网将逐渐转向使用 IPv6。

## IPv6 和 VPN：如果您的 VPN 不支持 IPv6 对上网有影响吗？

您可能想知道 IPv6 与 VPN 有何关联。事实上，许多主要的 VPN 提供商实际上并不支持 IPv6，包括 NordVPN。然而，如果您使用 IPv4 地址，那么它应该与您的 VPN 完美兼容；您的数据在使用 IPv4 协议的加密隧道中传输时将受到保护。

事实上，多数 [VPN 软件](https://nordvpn.com/zh/download/)都在 IPv4 上运行。如果您尝试在仅支持 IPv4 的 VPN 上使用 IPv6，您的 IPv6 流量可能会通过默认网关和 ISP 重定向。您的 IPv6 流量将在安全 VPN 隧道之外传输。

目前，我们其中的解决方案包括禁用大部分 IPv6 流量，以确保用户流量的安全。然而，NordVPN 计划在未来支持 IPv6。