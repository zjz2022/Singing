虚拟dom是什么? 原理? 优缺点?

vue 和 react 在虚拟dom的diff上，做了哪些改进使得速度很快?



## vue虚拟dom

### 7.1 虚拟dom是什么

### 7.2 虚拟dom的优缺点

**优点：**

* 保证性能下限： 框架的虚拟 DOM 需要适配任何上层 API 可能产生的操作，它的一些 DOM 操作的实现必须是普适的，所以它的性能并不是最优的；但是比起粗暴的 DOM 操作性能要好很多，因此框架的虚拟 DOM 至少可以保证在你不需要手动优化的情况下，依然可以提供还不错的性能，即保证性能的下限；
* 无需手动操作 DOM： 我们不再需要手动去操作 DOM，只需要写好 View-Model 的代码逻辑，框架会根据虚拟 DOM 和 数据双向绑定，帮我们以可预期的方式更新视图，极大提高我们的开发效率；
* 跨平台： 虚拟 DOM 本质上是 JavaScript 对象,而 DOM 与平台强相关，相比之下虚拟 DOM 可以进行更方便地跨平台操作，例如服务器渲染、weex 开发等等

**缺点：**

无法进行极致优化： 虽然虚拟 DOM + 合理的优化，足以应对绝大部分应用的性能需求，但在一些性能要求极高的应用中虚拟 DOM 无法进行针对性的极致优化:比如动画等等

### 7.3 虚拟dom实现原理？

**虚拟 DOM 的实现原理主要包括以下 3 部分：**

* 用 JavaScript 对象模拟真实 DOM 树，对真实 DOM 进行抽象；
* diff 算法 — 比较两棵虚拟 DOM 树的差异；
* pach 算法 — 将两个虚拟 DOM 对象的差异应用到真正的 DOM 树

### 7.4 vue 和 react 在虚拟dom的diff上，做了哪些改进使得速度很快?

### 7.5 虚拟dom是用来干什么的？







## vue和react都用到了虚拟dom，讲讲你对虚拟dom的理解，虚拟dom是如何转换成真实dom的

**对虚拟DOM的理解**
性能优化: 直接操作真实DOM通常比较慢，因为它涉及到浏览器的多个重绘和回流过程。虚拟DOM允许在内存中进行高效的节点操作，减少对真实DOM的直接操作次数。
声明式UI: 在React和Vue中，UI是以声明方式构建的。你描述UI应该如何根据不同的状态改变，而不是直接操作DOM来反映这些变化。
跨平台: 虚拟DOM因其本质上是JavaScript对象，可用于跨平台应用（如React Native）中，实现不同环境下的UI渲染。
**虚拟DOM如何转换成真实DOM**
初始渲染: 当应用首次加载时，框架会根据虚拟DOM创建一个真实的DOM树，并将其插入到浏览器中。
状态更新: 当应用的状态发生变化时（例如，用户的交互或数据的更改），框架会创建一个新的虚拟DOM树。
差异比较（Diffing）: 框架比较新旧虚拟DOM树的差异。这个过程通常通过高效的算法进行，以确保尽可能少的计算。
生成补丁（Patching）: 根据差异生成“补丁”，即对真实DOM进行的最小更改集合。
更新真实DOM: 应用这些补丁到真实DOM上，以反映最新的应用状态。这一步骤尽量减少了对真实DOM的操作，从而提高性能。
**结论**
虚拟DOM不是没有成本的 —— 它需要额外的内存来维护两个DOM树的表示，并且需要执行Diff算法。但在大多数现代Web应用中，这种成本相比于直接操作真实DOM带来的性能提升是值得的。虚拟DOM的主要优势在于它提供了一种更高效、更易于管理和维护的方式来处理用户界面的动态更新。